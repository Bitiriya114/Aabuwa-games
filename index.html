<script>
let balance = 1000;
let betColor = "";
let defaultTime = 30;
let time = defaultTime;
let history = [];
let period = 10001;

function setMode(seconds,btn){
  defaultTime = seconds;
  time = seconds;
  document.querySelectorAll(".mode-btn").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
}

function bet(color){
  let amount = parseInt(document.getElementById("betAmount").value);
  if(amount > balance){
    alert("Insufficient Balance");
    return;
  }
  betColor = color;
  alert("Bet placed on " + color);
}

function getColorByNumber(num){
  if(num == 0 || num == 5) return "Violet";
  if(num % 2 == 0) return "Red";
  return "Green";
}

setInterval(()=>{
  time--;
  document.getElementById("time").innerText = time;

  if(time <= 0){

    let randomNumber = Math.floor(Math.random()*10);
    let resultColor = getColorByNumber(randomNumber);

    document.getElementById("result").innerText = 
      resultColor + " (" + randomNumber + ")";

    let amount = parseInt(document.getElementById("betAmount").value);

    if(betColor == resultColor){
      balance += amount;
    } 
    else if(betColor != ""){
      balance -= amount;
    }

    document.getElementById("balance").innerText = balance;

    history.unshift({
      period: period,
      number: randomNumber,
      color: resultColor
    });

    if(history.length > 10){
      history.pop();
    }

    document.getElementById("historyList").innerHTML =
      history.map(h => 
        `<div style="margin:5px;padding:5px;background:#1f2937;border-radius:5px;">
          ${h.period} | 
          <b>${h.number}</b> | 
          <span style="color:${h.color=='Green'?'#16a34a':h.color=='Red'?'#dc2626':'#7c3aed'}">
          ${h.color}
          </span>
        </div>`
      ).join("");

    betColor = "";
    time = defaultTime;
    period++;
  }

},1000);
</script>
